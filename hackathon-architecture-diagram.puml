@startuml Instagram Fact-Checking Bot - System Architecture
!theme plain
skinparam backgroundColor white
skinparam defaultFontSize 12
skinparam componentFontSize 11

title ðŸ—ï¸ Instagram Fact-Checking Bot - System Architecture

package "ðŸ“± Frontend Layer" {
    [ðŸ‘¤ Instagram User] as User
    [ðŸ“¸ Instagram Platform] as Instagram
}

package "ðŸŒ API Gateway" {
    [ðŸ”— Express.js Server\nPort 3000] as Server
    [ðŸ“¡ Webhook Handler\n/webhook] as Webhook
}

package "ðŸ¤– Core Bot Logic" {
    [ðŸ’¬ Message Handler\nConversation Management] as MessageHandler
    [ðŸ§  Fact Checker\nAI Processing Engine] as FactChecker
    [ðŸ“¤ Instagram API\nMessage Delivery] as InstagramAPI
}

package "ðŸŽ¬ Media Processing" {
    [ðŸ“¥ Video Downloader] as VideoDownloader
    [ðŸŽµ Audio Extractor\n(FFmpeg)] as AudioExtractor
    [ðŸ–¼ï¸ Frame Extractor\n(FFmpeg)] as FrameExtractor
    [ðŸ—‚ï¸ File Manager\nTemp Storage] as FileManager
}

package "ðŸ§  AI Services" {
    [ðŸŽ¤ Speech-to-Text\n(Gemini AI)] as SpeechAI
    [ðŸ‘ï¸ Visual Analysis\n(Gemini AI)] as VisualAI
    [ðŸ“ Claim Extraction\n(Gemini AI)] as ClaimAI
    [ðŸ” Fact Verification\n(Gemini AI)] as VerifyAI
}

package "ðŸŒ External APIs" {
    [ðŸ” Google Custom Search\nNews Verification] as GoogleSearch
    [ðŸ“° News Sources\nWeb Scraping] as NewsSources
}

package "ðŸ’¾ Data Layer" {
    [ðŸ§  Conversation Memory\n(In-Memory)] as ConversationMemory
    [ðŸ“š Fact-Check History\n(In-Memory)] as FactCheckHistory
    [ðŸ—ƒï¸ Article Cache\n(In-Memory)] as ArticleCache
}

' User Flow
User --> Instagram : Share reel with claims
Instagram --> Server : Webhook notification
Server --> Webhook : Route to webhook handler

' Core Processing Flow
Webhook --> MessageHandler : Process message/reel
MessageHandler --> FactChecker : Analyze content
FactChecker --> VideoDownloader : Download video
FactChecker --> AudioExtractor : Extract audio
FactChecker --> FrameExtractor : Extract frames

' AI Processing
AudioExtractor --> SpeechAI : Transcribe audio
FrameExtractor --> VisualAI : Analyze frames
FactChecker --> ClaimAI : Extract factual claims
FactChecker --> VerifyAI : Verify claims

' External Verification
VerifyAI --> GoogleSearch : Search for verification
GoogleSearch --> NewsSources : Scrape articles
NewsSources --> VerifyAI : Article content

' Response Generation
VerifyAI --> FactChecker : Verification results
FactChecker --> MessageHandler : Formatted response
MessageHandler --> InstagramAPI : Send response
InstagramAPI --> Instagram : Deliver to user
Instagram --> User : Show fact-check result

' Data Storage
MessageHandler --> ConversationMemory : Store conversation state
FactChecker --> FactCheckHistory : Store fact-check results
NewsSources --> ArticleCache : Cache article content

' Cleanup
FileManager --> FileManager : Clean temp files

note top of FactChecker : **Core Innovation**\nMulti-modal AI analysis:\nâ€¢ Video frames\nâ€¢ Audio transcription\nâ€¢ Text captions\nâ€¢ Real-time fact-checking

note right of GoogleSearch : **Verification Sources**\nâ€¢ News articles\nâ€¢ Official sources\nâ€¢ Government data\nâ€¢ Fact-checking sites

note bottom of ConversationMemory : **Smart Context**\nâ€¢ Follow-up questions\nâ€¢ Multi-reel conversations\nâ€¢ History tracking\nâ€¢ Context switching

@enduml
